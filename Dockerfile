FROM alpine:3.11

ARG SAMBA_VERSION=4.11.16-r0

ENV FORCE_USER_ID=0
ENV FORCE_GROUP_ID=0

RUN apk add "samba=${SAMBA_VERSION}"

WORKDIR /etc/samba
COPY samba .
RUN chmod +x samba.sh

EXPOSE 445/tcp
EXPOSE 445/udp

EXPOSE 139/tcp
EXPOSE 139/udp

EXPOSE 138/tcp
EXPOSE 138/udp

EXPOSE 137/tcp
EXPOSE 137/udp

CMD ./samba.sh

